# KTAS 중증도 분류 시스템
본 프로젝트는 KTAS(Korean Triage and Acuity Scale) 가이드라인을 기반으로 환자의 중증도를 평가하는 시스템입니다. 의료진이 응급실에서 환자의 상태를 신속하게 평가하고 적절한 우선순위를 결정하는 데 도움을 주기 위해 개발되었습니다.

---

## 목차
1. [프로젝트 개요](#1-프로젝트_개요)
2. [사용 방법]
3. [배포 링크]
4. [로컬 실행 방법](#4-로컬-실행-방법)
---

### 1. 프로젝트 개요
#### 1-1. 서비스명 및 개요
**서비스명**
- AI기반 KTAS 중증도 분류 보조 시스템

**서비스 개요**
- KTAS 가이드라인을 기반으로 환자의 증상, 활력징후, 의식 상태 등을 분석하여 중증도를 자동으로 평가하는 AI 시스템
- 의료진의 신속한 의사결정을 돕기 위한 보조 도구

#### 1-2. 타겟 사용자 및 시장 분석
**타겟 사용자**
- 응급실 의료진 및 구급대원 의료진
- KTAS 중증도 분류에 익숙하지 않은 신입 의료진

**시장 분석**
- KTAS 중증도 분류는 응급실에 들어가기 전 가장 먼저 시행되는 첫 번째 단계로 신속함이 필요
- KTAS에 익숙하지 않은 의료진의 경우 신속한 판단이 불가
- 응급 상황에서의 정확하고 빠른 중증도 평가는 환자의 생존율과 직결됨

#### 1-3. 서비스 목표 및 기대효과
- **서비스 목표**:
  - 신속하고 일관된 KTAS 중증도 평가 제공
  - 의료진의 판단 시간 단축 및 인적 오류 감소
  - 응급 환자 관리의 효율성 향상

- **기대효과**:
  - 환자 대기 시간 감소 및 응급실 운영 효율성 증가
  - 중증 환자의 빠른 식별과 적절한 처치로 생존율 향상
  - 의료 인력의 업무 부담 경감 및 의사결정 지원

#### 1-4. 시스템 구성
**Tech Stack**
- Frontend: Streamlit
- Backend: Python
- RAG 시스템: LangChain, Upstage AI(Solar-Pro 모델)
- 벡터 데이터베이스: ChromaDB

**Architecture**
벡터 데이터베이스에 KTAS 가이드라인 정보 저장
사용자 입력 데이터를 바탕으로 관련 가이드라인 검색
RAG(Retrieval-Augmented Generation) 시스템을 통한 중증도 평가
Streamlit 웹 인터페이스로 결과 제공

#### 1-5. 주요 기능
- 환자의 기본 정보 입력 (성별, 나이, 의식상태 등)
- 환자의 활력징후 입력 및 분석
- 기저질환 및 복용약물 정보 수집
- 증상 기반 KTAS 점수 평가
- 중증도에 따른 치료 우선순위 제안

#### 1-6. 데이터 구성 및 활용
- **원천 데이터**: KTAS 홈페이지의 KTAS 가이드라인 PPTX / [KTAS](http://www.ktas.org/)
- **데이터 처리 방법**:
    1. 데이터 수집: 
    2. 데이터 전처리: 

- **데이터 분포**:


#### 1-7. RAG 파이프라인 설계
1. **벡터 데이터베이스 구축**:
    - 벡터 DB: Chroma db
    - 임베딩 모델: Upstage Embeddings

2. **Retriever 및 Reranker 구현**:
    - 방식: Dense Retriever (MMR 방식)
    - 검색방식: MMR, 반환할 문서 수(k) = 3

3. **LLM 프롬프트 설계**:
    - 모델: UpstageAI (Solar-Pro)

#### 1-8. 평가 및 결과
1. **평가방법**:
    - 정량 평가: 
    - 정성 평가: 정확성, 관련성, 명확성

2. **평가 결과**:
    - 정량 평가:

---

#### **결론 및 향후 발전 방향**
- **결론**:


- **향후 발전 방향**:


    
---
### 2. 사용 방법
1. 환자의 기본 정보(성별, 나이, 의식상태)를 입력합니다.
2. 활력징후를 "혈압-맥박-산소포화도-체온-혈당" 형식으로 입력합니다 (예: 120/80-75-100-36.5-80).
3. 기저질환과 복용약물 정보를 입력합니다.
4. 현재 증상을 상세히 기술합니다.
5. "중증도 평가" 버튼을 클릭하여 KTAS 평가 결과를 확인합니다.

#### KTAS 점수 체계
- KTAS 1: 즉각적인 소생술 필요 (생명이나 사지를 위협하는 상태)
- KTAS 2: 고위험 상황 (생명, 사지, 신체기능에 잠재적 위협)
- KTAS 3: 급성 질환 (치료가 필요한 상태로 진행할 가능성)
- KTAS 4: 아급성/만성 상태 (1~2시간 내 처치 필요)
- KTAS 5: 비응급 상태 (만성적 문제, 악화 가능성 낮음)
---

### 3. 배포 링크


### 4. 로컬 실행 방법
#### 요구사항
실행을 위해 필요한 최소 요구사항
- 파이썬 3.10 이상
- Git 설치
- 윈도우 10이상

(윈도우 환경에서 테스트가 진행되었기에 이외의 환경에 대해선 실해이 원할하지 않을 수 있습니다.)

1. 저장소를 클론 후 프로젝트 폴더로 이동합니다.
```bash
git clone https://github.com/your-username/ktas-classification-system.git
cd ktas-classification-system
```

2. 파이썬 가상환경을 생성하고 활성화합니다.
```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
venv\Scripts\activate  # Windows
```

3. 필요한 패키지를 설치합니다.
```bash
pip install -r requirements.txt
```

4. 환경 변수 설정을 위해 .env 파일을 생성합니다.
```ini
UPSTAGE_API_KEY=your_api_key
```

5. 프로그램을 실행합니다.
```bash
streamlit run app.py
```

6. 웹 브라우저에서 http://localhost:8501로 접속하여 앱을 사용합니다.

---
### 주의사항
이 시스템은 의료진의 의사결정을 보조하는 도구로, 최종 판단은 반드시 전문 의료진에 의해 이루어져야 합니다. <br/> 제공된 KTAS 점수와 권장사항은 참고용이며, 실제 임상 상황에서는 추가적인 검사와 평가가 필요할 수 있습니다.